{
   "info" : "<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=yes\" />\n<script type=\"text/javascript\">\nconst macros = { \"\\\\R\": \"\\\\textsf{R}\", \"\\\\code\": \"\\\\texttt\"};\nfunction processMathHTML() {\n    var l = document.getElementsByClassName('reqn');\n    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }\n    return;\n}</script>\n<script defer src=\"https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js\"\n    onload=\"processMathHTML();\"></script>\n<table style=\"width: 100%;\"><tr><td>Nightingale</td><td style=\"text-align: right;\">R Documentation</td></tr></table>\n<h2>\nFlorence Nightingale's data on deaths from various causes in the Crimean War\n</h2>\n<h3>Description</h3>\n<p>In the history of data visualization, Florence Nightingale is best remembered \nfor her role as a social activist and her view that statistical data,  presented in\ncharts and diagrams, could be used as powerful arguments for medical reform. \n</p>\n<p>After witnessing deplorable sanitary conditions  in the Crimea, she wrote  \nseveral influential texts (Nightingale, 1858, 1859), including polar-area\ngraphs (sometimes called &quot;Coxcombs&quot; or rose diagrams), showing the number of deaths in the\nCrimean from battle compared to disease or preventable causes that could be reduced by\nbetter battlefield nursing care.  \n</p>\n<p>Her <em>Diagram of the Causes of Mortality in the Army in the East</em>\nshowed that  most of the  British soldiers who  died  during the  Crimean War\ndied of sickness rather than of wounds  or other causes.\nIt also  showed that  the death  rate was  higher in  the first  year of the war,\nbefore a Sanitary Commissioners arrived in March 1855 to improve hygiene in the camps and hospitals.\n</p>\n<h3>Usage</h3>\n<pre><code class='language-R'>data(Nightingale)</code></pre>\n<h3>Format</h3>\n<p>A data frame with 24 observations on the following 10 variables.\n</p>\n<dl>\n<dt><code>Date</code></dt><dd><p>a Date, composed as <code>as.Date(paste(Year, Month, 1, sep='-'), \"%Y-%b-%d\")</code></p>\n</dd>\n<dt><code>Month</code></dt><dd><p>Month of the Crimean War, an ordered factor</p>\n</dd>\n<dt><code>Year</code></dt><dd><p>Year of the Crimean War</p>\n</dd>\n<dt><code>Army</code></dt><dd><p>Estimated average monthly strength of the British army</p>\n</dd>\n<dt><code>Disease</code></dt><dd><p>Number of deaths from preventable or mitagable zymotic diseases</p>\n</dd>\n<dt><code>Wounds</code></dt><dd><p>Number of deaths directly from battle wounds</p>\n</dd>\n<dt><code>Other</code></dt><dd><p>Number of deaths from other causes</p>\n</dd>\n<dt><code>Disease.rate</code></dt><dd><p>Annual rate of deaths from preventable or mitagable zymotic diseases, per 1000</p>\n</dd>\n<dt><code>Wounds.rate</code></dt><dd><p>Annual rate of deaths directly from battle wounds, per 1000</p>\n</dd>\n<dt><code>Other.rate</code></dt><dd><p>Annual rate of deaths from other causes, per 1000</p>\n</dd>\n</dl>\n<h3>Details</h3>\n<p>For a given cause of death, <code>D</code>, annual rates per 1000 are calculated as <code>12 * 1000 * D / Army</code>,\nrounded to 1 decimal.\n</p>\n<p>The two panels of Nightingale's Coxcomb correspond to dates before and after March 1855\n</p>\n<h3>Source</h3>\n<p>The data were obtained from:\n</p>\n<p>Pearson, M. and Short, I. (2007).\nUnderstanding Uncertainty: Mathematics of the Coxcomb.\n<a href=\"http://understandinguncertainty.org/node/214\">http://understandinguncertainty.org/node/214</a>.\n</p>\n<h3>References</h3>\n<p>Nightingale, F. (1858)\n<em>Notes on Matters Affecting the Health, Efficiency, and Hospital Administration of the British Army</em>\nHarrison and Sons, 1858\n</p>\n<p>Nightingale, F. (1859)\n<em>A Contribution to the Sanitary History of the British Army during the Late War with Russia</em>\nLondon: John W. Parker and Son.\n</p>\n<p>Small, H. (1998)\nFlorence Nightingale's statistical diagrams\n<a href=\"http://www.florence-nightingale-avenging-angel.co.uk/GraphicsPaper/Graphics.htm\">http://www.florence-nightingale-avenging-angel.co.uk/GraphicsPaper/Graphics.htm</a>\n</p>\n<p>Pearson, M. and Short, I. (2008)\nNightingale's Rose (flash animation).\n<a href=\"http://understandinguncertainty.org/files/animations/Nightingale11/Nightingale1.html\">http://understandinguncertainty.org/files/animations/Nightingale11/Nightingale1.html</a>\n</p>\n<h3>Examples</h3>\n<pre><code class='language-R'>data(Nightingale)\n# For some graphs, it is more convenient to reshape death rates to long format\n#  keep only Date and death rates\nrequire(reshape)\nNight&lt;- Nightingale[,c(1,8:10)]\nmelted &lt;- melt(Night, \"Date\")\nnames(melted) &lt;- c(\"Date\", \"Cause\", \"Deaths\")\nmelted$Cause &lt;- sub(\"\\\\.rate\", \"\", melted$Cause)\nmelted$Regime &lt;- ordered( rep(c(rep('Before', 12), rep('After', 12)), 3), \n                          levels=c('Before', 'After'))\nNight &lt;- melted\n# subsets, to facilitate separate plotting\nNight1 &lt;- subset(Night, Date &lt; as.Date(\"1855-04-01\"))\nNight2 &lt;- subset(Night, Date &gt;= as.Date(\"1855-04-01\"))\n# sort according to Deaths in decreasing order, so counts are not obscured [thx: Monique Graf]\nNight1 &lt;- Night1[order(Night1$Deaths, decreasing=TRUE),]\nNight2 &lt;- Night2[order(Night2$Deaths, decreasing=TRUE),]\n# merge the two sorted files\nNight &lt;- rbind(Night1, Night2)\nrequire(ggplot2)\n# Before plot\ncxc1 &lt;- ggplot(Night1, aes(x = factor(Date), y=Deaths, fill = Cause)) +\n\t\t# do it as a stacked bar chart first\n   geom_bar(width = 1, position=\"identity\", stat=\"identity\", color=\"black\") +\n\t\t# set scale so area ~ Deaths\t\n   scale_y_sqrt() \n\t\t# A coxcomb plot = bar chart + polar coordinates\ncxc1 + coord_polar(start=3*pi/2) + \n\tggtitle(\"Causes of Mortality in the Army in the East\") + \n\txlab(\"\")\n# After plot\ncxc2 &lt;- ggplot(Night2, aes(x = factor(Date), y=Deaths, fill = Cause)) +\n   geom_bar(width = 1, position=\"identity\", stat=\"identity\", color=\"black\") +\n   scale_y_sqrt()\ncxc2 + coord_polar(start=3*pi/2) +\n\tggtitle(\"Causes of Mortality in the Army in the East\") + \n\txlab(\"\")\n## Not run: \n# do both together, with faceting\ncxc &lt;- ggplot(Night, aes(x = factor(Date), y=Deaths, fill = Cause)) +\n geom_bar(width = 1, position=\"identity\", stat=\"identity\", color=\"black\") + \n scale_y_sqrt() +\n facet_grid(. ~ Regime, scales=\"free\", labeller=label_both)\ncxc + coord_polar(start=3*pi/2) +\n\tggtitle(\"Causes of Mortality in the Army in the East\") + \n\txlab(\"\")\n## End(Not run)\n## What if she had made a set of line graphs?\n# these plots are best viewed with width ~ 2 * height \ncolors &lt;- c(\"blue\", \"red\", \"black\")\nwith(Nightingale, {\n\tplot(Date, Disease.rate, type=\"n\", cex.lab=1.25, \n\t\tylab=\"Annual Death Rate\", xlab=\"Date\", xaxt=\"n\",\n\t\tmain=\"Causes of Mortality of the British Army in the East\");\n\t# background, to separate before, after\n\trect(as.Date(\"1854/4/1\"), -10, as.Date(\"1855/3/1\"), \n\t\t1.02*max(Disease.rate), col=gray(.90), border=\"transparent\");\n\ttext( as.Date(\"1854/4/1\"), .98*max(Disease.rate), \"Before Sanitary\\nCommission\", pos=4);\n\ttext( as.Date(\"1855/4/1\"), .98*max(Disease.rate), \"After Sanitary\\nCommission\", pos=4);\n\t# plot the data\n\tpoints(Date, Disease.rate, type=\"b\", col=colors[1], lwd=3);\n\tpoints(Date, Wounds.rate, type=\"b\", col=colors[2], lwd=2);\n\tpoints(Date, Other.rate, type=\"b\", col=colors[3], lwd=2)\n# add custom Date axis and legend\naxis.Date(1, at=seq(as.Date(\"1854/4/1\"), as.Date(\"1856/3/1\"), \"3 months\"), format=\"%b %Y\")\nlegend(as.Date(\"1855/10/20\"), 700, c(\"Preventable disease\", \"Wounds and injuries\", \"Other\"),\n\tcol=colors, fill=colors, title=\"Cause\", cex=1.25)\n# Alternatively, show each cause of death as percent of total\nNightingale &lt;- within(Nightingale, {\n\tTotal &lt;- Disease + Wounds + Other\n\tDisease.pct &lt;- 100*Disease/Total\n\tWounds.pct &lt;- 100*Wounds/Total\n\tOther.pct &lt;- 100*Other/Total\ncolors &lt;- c(\"blue\", \"red\", \"black\")\nwith(Nightingale, {\n\tplot(Date, Disease.pct, type=\"n\",  ylim=c(0,100), cex.lab=1.25,\n\t\tylab=\"Percent deaths\", xlab=\"Date\", xaxt=\"n\",\n\t\tmain=\"Percentage of Deaths by Cause\");\n\t# background, to separate before, after\n\trect(as.Date(\"1854/4/1\"), -10, as.Date(\"1855/3/1\"), \n\t\t1.02*max(Disease.rate), col=gray(.90), border=\"transparent\");\n\ttext( as.Date(\"1854/4/1\"), .98*max(Disease.pct), \"Before Sanitary\\nCommission\", pos=4);\n\ttext( as.Date(\"1855/4/1\"), .98*max(Disease.pct), \"After Sanitary\\nCommission\", pos=4);\n\t# plot the data\n\tpoints(Date, Disease.pct, type=\"b\", col=colors[1], lwd=3);\n\tpoints(Date, Wounds.pct, type=\"b\", col=colors[2], lwd=2);\n\tpoints(Date, Other.pct, type=\"b\", col=colors[3], lwd=2)\n# add custom Date axis and legend\naxis.Date(1, at=seq(as.Date(\"1854/4/1\"), as.Date(\"1856/3/1\"), \"3 months\"), format=\"%b %Y\")\nlegend(as.Date(\"1854/8/20\"), 60, c(\"Preventable disease\", \"Wounds and injuries\", \"Other\"),\n\tcol=colors, fill=colors, title=\"Cause\", cex=1.25)\n</code></pre>\n</main>\n</div>\n",
   "data" : {
      "y" : {
         "vars" : [
            "Year",
            "Army",
            "Disease",
            "Wounds",
            "Other",
            "Disease.rate",
            "Wounds.rate",
            "Other.rate"
         ],
         "smps" : [
            "Smp1",
            "Smp2",
            "Smp3",
            "Smp4",
            "Smp5",
            "Smp6",
            "Smp7",
            "Smp8",
            "Smp9",
            "Smp10",
            "Smp11",
            "Smp12",
            "Smp13",
            "Smp14",
            "Smp15",
            "Smp16",
            "Smp17",
            "Smp18",
            "Smp19",
            "Smp20",
            "Smp21",
            "Smp22",
            "Smp23",
            "Smp24"
         ],
         "data" : [
            [
               1854,
               1854,
               1854,
               1854,
               1854,
               1854,
               1854,
               1854,
               1854,
               1855,
               1855,
               1855,
               1855,
               1855,
               1855,
               1855,
               1855,
               1855,
               1855,
               1855,
               1855,
               1856,
               1856,
               1856
            ],
            [
               8571,
               23333,
               28333,
               28722,
               30246,
               30290,
               30643,
               29736,
               32779,
               32393,
               30919,
               30107,
               32252,
               35473,
               38863,
               42647,
               44614,
               47751,
               46852,
               37853,
               43217,
               44212,
               43485,
               46140
            ],
            [
               1,
               12,
               11,
               359,
               828,
               788,
               503,
               844,
               1725,
               2761,
               2120,
               1205,
               477,
               508,
               802,
               382,
               483,
               189,
               128,
               178,
               91,
               42,
               24,
               15
            ],
            [
               0,
               0,
               0,
               0,
               1,
               81,
               132,
               287,
               114,
               83,
               42,
               32,
               48,
               49,
               209,
               134,
               164,
               276,
               53,
               33,
               18,
               2,
               0,
               0
            ],
            [
               5,
               9,
               6,
               23,
               30,
               70,
               128,
               106,
               131,
               324,
               361,
               172,
               57,
               37,
               31,
               33,
               25,
               20,
               18,
               32,
               28,
               48,
               19,
               35
            ],
            [
               1.4,
               6.2,
               4.7,
               150,
               328.5,
               312.2,
               197,
               340.6,
               631.5,
               1022.8,
               822.8,
               480.3,
               177.5,
               171.8,
               247.6,
               107.5,
               129.9,
               47.5,
               32.8,
               56.4,
               25.3,
               11.4,
               6.6,
               3.9
            ],
            [
               0,
               0,
               0,
               0,
               0.4,
               32.1,
               51.7,
               115.8,
               41.7,
               30.7,
               16.3,
               12.8,
               17.9,
               16.6,
               64.5,
               37.7,
               44.1,
               69.4,
               13.6,
               10.5,
               5,
               0.5,
               0,
               0
            ],
            [
               7,
               4.6,
               2.5,
               9.6,
               11.9,
               27.7,
               50.1,
               42.8,
               48,
               120,
               140.1,
               68.6,
               21.2,
               12.5,
               9.6,
               9.3,
               6.7,
               5,
               4.6,
               10.1,
               7.8,
               13,
               5.2,
               9.1
            ]
         ]
      },
      "x" : {
         "Month" : [
            "Apr",
            "May",
            "Jun",
            "Jul",
            "Aug",
            "Sep",
            "Oct",
            "Nov",
            "Dec",
            "Jan",
            "Feb",
            "Mar",
            "Apr",
            "May",
            "Jun",
            "Jul",
            "Aug",
            "Sep",
            "Oct",
            "Nov",
            "Dec",
            "Jan",
            "Feb",
            "Mar"
         ],
         "Date" : [
            "1854-04-01",
            "1854-05-01",
            "1854-06-01",
            "1854-07-01",
            "1854-08-01",
            "1854-09-01",
            "1854-10-01",
            "1854-11-01",
            "1854-12-01",
            "1855-01-01",
            "1855-02-01",
            "1855-03-01",
            "1855-04-01",
            "1855-05-01",
            "1855-06-01",
            "1855-07-01",
            "1855-08-01",
            "1855-09-01",
            "1855-10-01",
            "1855-11-01",
            "1855-12-01",
            "1856-01-01",
            "1856-02-01",
            "1856-03-01"
         ]
      }
   },
   "config" : {
      "title" : "Florence Nightingale's data on deaths from various causes in the Crimean War",
      "subtitle" : "HistData - Nightingale",
      "smpOverlays" : [
         "Month",
         "Date"
      ],
      "graphType" : "Heatmap"
   }
}
